<!DOCTYPE html>
<html>
<head>
    <title>Clear Narrative Pulse Storage</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto;
        }
        button {
            background: #4a7c59;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 0;
        }
        button:hover {
            background: #3a6c49;
        }
        .status {
            margin: 20px 0;
            padding: 20px;
            background: #f0f0f0;
            border-radius: 6px;
        }
        .success { color: green; }
        .info { color: #666; }
    </style>
</head>
<body>
    <h1>Clear Narrative Pulse Storage</h1>
    
    <button onclick="clearStorage()">Clear All Narrative Pulse Data</button>
    
    <div id="status" class="status"></div>
    
    <p><a href="demo.html">← Back to Demo</a></p>
    
    <script>
        function clearStorage() {
            const status = document.getElementById('status');
            let html = '<h3>Clearing storage...</h3>';
            
            // Find all localStorage keys related to Narrative Pulse
            const keysToRemove = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && (key.includes('narrativePulse') || key.includes('NarrativePulse'))) {
                    keysToRemove.push(key);
                }
            }
            
            // Show what we found
            if (keysToRemove.length > 0) {
                html += '<p class="info">Found ' + keysToRemove.length + ' keys to remove:</p>';
                html += '<ul>';
                keysToRemove.forEach(key => {
                    const value = localStorage.getItem(key);
                    html += '<li><strong>' + key + '</strong>: ' + value + '</li>';
                });
                html += '</ul>';
                
                // Remove them
                keysToRemove.forEach(key => {
                    localStorage.removeItem(key);
                });
                
                html += '<p class="success">✓ All Narrative Pulse data cleared!</p>';
            } else {
                html += '<p class="info">No Narrative Pulse data found in localStorage.</p>';
            }
            
            html += '<p><strong>Now refresh the demo page to see all topics.</strong></p>';
            
            status.innerHTML = html;
        }
        
        // Show current state on load
        window.onload = function() {
            const status = document.getElementById('status');
            let html = '<h3>Current localStorage state:</h3>';
            
            let found = false;
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && (key.includes('narrativePulse') || key.includes('NarrativePulse'))) {
                    const value = localStorage.getItem(key);
                    html += '<p><strong>' + key + '</strong>: ' + value + '</p>';
                    found = true;
                }
            }
            
            if (!found) {
                html += '<p class="info">No Narrative Pulse data in localStorage.</p>';
            }
            
            status.innerHTML = html;
        };
    </script>
</body>
</html>